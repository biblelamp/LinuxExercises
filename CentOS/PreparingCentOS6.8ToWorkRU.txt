Готовлю CentOS 6.8 к работе

С Linux я познакомился в 2005 году, это был Debian. Потом последовал долгий роман с Ubuntu Linux, ради которого в марте 2009 приобрел нетбук Asus EeePC 1000. В 2010 близко сошёлся с ALT Linux, участвовал в «Школьном проекте» (https://habrahabr.ru/post/105455/) и даже стал майнтейнером пакета basic256 (http://sisyphus.ru/ru/srpm/Sisyphus/basic256).

Последние несколько лет мой EeePC с Ubuntu мирно отдыхал в глубине шкафа. И тут появился повод стряхнуть с него пыль. Возникла задача познакомиться с CentOS Linux и протестировать там примеры для вебинара (https://youtu.be/802v6EhYRv4) по Apache Ant.

Посетив www.centos.org, останавливаюсь на версии 6.8. На странице  http://isoredirect.centos.org/centos/6/isos/i386/ выбираю сервер с образами дисков и скачиваю файл CentOS-6.8-i386-LiveCD.iso. С помощью Rufus (https://rufus.akeo.ie) создаю загрузочный USB и успешно инсталлировал CentOS 6.8 на свой Asus EeePC. Процесс очень простой. А тёмно-синяя цветовая гамма старого доброго GNOME приятна для глаз.

Какие инструменты (программы/пакеты) мне нужны? Пока только три: Java JDK, Apache Ant и Git. Начинаю с синхронизации и обновления индексных файлов пакетов, памятуя что вместо apt-get (в Ubuntu) в CentOS используют yum:

[lamp@localhost ~]$ sudo yum update
[sudo] password for lamp:
lamp is not in the sudoers file. This incident will be reported.

Вот это новость… В отличие от Ubuntu, простой пользователь не обладает правами выполнения команд от имени root. Изучив https://wiki.centos.org/TipsAndTricks/BecomingRoot, решаю использовать «quick and dirty way», отредактировав файл /etc/sudoers. Для этого у root есть команда visudo (спасибо опытным коллегам). Перехожу в режим root (после su ввожу root пароль, заданный при инсталляции):

[lamp@localhost ~]$ su
Password:
[root@localhost lamp]# visudo

Нахожу в файле строку root ALL=(ALL) ALL и добавляю (предварительно нажав клавишу «I» и войдя в режим вставки) ниже подобную строку, только вместо root пишу lamp, получается так:

root	ALL=(ALL)	ALL
lamp	ALL=(ALL)	ALL

Нажимаю Esc и выхожу из файла с сохранением (:wq). Покидаю режим root командой exit. Теперь можно выполнять административные команды через sudo, вводя пользовательский пароль. Итак, снова:

[lamp@localhost ~]$ sudo yum update
[sudo] password for lamp:

Ввожу пароль, всё работает, yum обновляет индексы и заодно предлагает обновить кое-какие пакеты, скачав 197 Мб. Отвечаю N, это немного подождёт.

Время заняться Java JDK. Передо мной выбор - ставить oracle-jdk или open-jdk. Благодаря советам более опытных коллег чаша весов склоняется в сторону open-jdk. Использую команду yum search чтобы найти имя пакета для установки. Ставлю, само собой, самую свежую версию:

[lamp@localhost ~]$ sudo yum search jdk
...
java-1.8.0-openjdk-devel.i686 : OpenJDK Development Environment
...
[lamp@localhost ~]$ sudo yum install java-1.8.0-openjdk-devel
...
[lamp@localhost ~]$ javac -version
javac 1.8.0_121
[lamp@localhost ~]$ java -version
openjdk version "1.8.0_121"
OpenJDK Runtime Environment (build 1.8.0_121-b13)
OpenJDK Server VM (build 25.121-b13, mixed mode)

JDK есть, очередь за Apache Ant. Пробую поставить из репозитария:

[lamp@localhost ~]$ sudo yum install ant

и yum предлагает скачать около 60 Мб и установить 10 пакетов зависимостей, где сам ant только лишь 2.2 Мб. При этом Google слегка намекает — это версия 1.7.1, что меня совершенно не устраивает (там нет junit). После недолго поиска нахожу подходящий скрипт, позволяющий скачать и установить самую свежую версию. Слегка редактирую его под себя:

# download and install
antname=apache-ant
antserver=http://apache-mirror.rbc.ru/pub/apache
antversion=1.10.1
wget ${antserver}/ant/binaries/${antname}-${antversion}-bin.tar.gz
sudo tar xvfvz ${antname}-${antversion}-bin.tar.gz -C /opt
sudo ln -sfn /opt/${antname}-${antversion} /opt/ant
sudo sh -c 'echo ANT_HOME=/opt/ant >> /etc/environment'
sudo ln -sfn /opt/ant/bin/ant /usr/bin/ant

# check installation
ant -version

# cleanup
rm ${antname}-${antversion}-bin.tar.gz

сохраняю в домашнем каталоге, затем запускаю:

[lamp@localhost ~]$ chnod +x installantoncentos.sh
[lamp@localhost ~]$ ./installantoncentos.sh

в последней строке вижу результат команды ant -version:

Apache Ant(TM) version 1.10.1 compiled on February 2 2017

Git ставлю из репозитария:

[lamp@localhost ~]$ sudo yum install git
[lamp@localhost ~]$ git --version
git version 1.7.1

Итак, нужные инструменты готовы и можно приступать к тестированию примеров для вебинара. Но это уже другая история (https://habrahabr.ru/post/323204/)…
