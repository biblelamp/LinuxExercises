https://geektimes.ru: Linux, Программирование, Ноутбуки

Готовлю CentOS 6.8 к работе

Впервые с Linux я столкнулся в 2005 году, это был Debian. Потом последовал долгий период с Ubuntu Linux, ради изучения которого в марте 2009 был приобретён нетбук Asus EeePC 1000. В 2010 близко познакомился с ALT Linux и даже стал майнтейнером пакета basic256 (http://sisyphus.ru/ru/srpm/Sisyphus/basic256).

Последние пару лет мой EeePC с Ubuntu мирно отдыхал в глубине шкафa. И тут появился повод стряхнуть с него пыль. Возникла задача познакомится поближе с CentOS Linux и протестировать там примеры для моего вебинара по Apache Ant.

Посетив www.centos.org, останавливаюсь на версии 6.8. На странице  http://isoredirect.centos.org/centos/6/isos/i386/ выбираю сервер с образами дисков и скачиваю файл CentOS-6.8-i386-LiveCD.iso. С помощью Rufus (https://rufus.akeo.ie) создаю загрузочный USB и успешно инсталлирую CentOS 6.8 на свой Asus EeePC. Процесс очень простой. Вид старого доброго GNOME в тёмно-синей гамме пробуждает ностальгию…

Какие инструменты (программы/пакеты) мне нужны? Пока только три: Java JDK, Apache Ant и Git. Начинаю с синхронизации и обновления индексных файлов пакетов, памятуя что вместо apt-get (в Ubuntu) в CentOS мы используем yum:

[lamp@localhost ~]$ sudo yum update
[sudo] password for lamp:
lamp is not in the sudoers file. This incident will be reported.

Вот это новость… В отличие от Ubuntu, простой пользователь не обладает правами выполнения команд от имени root. Изучив https://wiki.centos.org/TipsAndTricks/BecomingRoot, решаю использовать «quick and dirty way». Консольным vi редактирую файл sudoers. Но сначала делаю его доступным для перезаписи. Предварительно перейдя в режим root (требуется ввести root пароль, заданный при инсталляции):

[lamp@localhost ~]$ su
Password:
[root@localhost lamp]# chmod +w /etc/sudoers
[root@localhost lamp]# vi /etc/sudoers

Нахожу в файле строку root ALL=(ALL) ALL и добавляю (предварительно нажав i) ниже подобную строку, только вместо root пишу lamp, получается так:

root	ALL=(ALL)	ALL
lamp	ALL=(ALL)	ALL

Нажимаю Esc и выхожу из файла с сохранением (:wq). И покидаю режима root командой exit. Теперь я могу выполнять административные команды через sudo вводя свой пользовательский пароль. Итак, снова:

[lamp@localhost ~]$ sudo yum update
[sudo] password for lamp:

Ввожу свой пароль, всё работает, yum обновляет индексы и заодно предлагает обновить кое-какие пакеты, скачав 197 Мб. Отвечаю N, обновиться всегда успею.

Теперь займусь Java JDK. Погуглив и изучив www.digitalocean.com/community/tutorials/how-to-install-java-on-centos-and-fedora принимаю решение ставить Oracle Java 8 JDK. С сайта www.oracle.com скачиваю пакет jdk-8u121-linux-i586.rpm и затем делаю локальную установку и проверяю результат:

[lamp@localhost ~]$ sudo yum localinstall  jdk-8u121-linux-i586.rpm
[lamp@localhost ~]$ javac -version
javac 1.8.0_121

[lamp@localhost ~]$ java -version
java version "1.8.0_121"
Java(TM) SE Runtime Environment (build 1.8.0_121-b13)
Java HotSpot(TM) Client VM (build 25.121-b13, mixed mode, sharing)

Очередь за Apace Ant. Пробую установить из стандартного репозитария:

[lamp@localhost ~]$ sudo yum install ant

и yum предлагает скачать 62 Мб и установить 14 пакетов зависимостей, при этом ant это только 2.2 Мб. При этом Google подсказывает - это будет версия 1.7.1 что меня совершенно не устраивает. После недолго поиска нахожу скрипт, слегка редактирую его:

# download and install
antversion=1.9.9
wget http://archive.apache.org/dist/ant/binaries/apache-ant-${antversion}-bin.tar.gz
sudo tar xvfvz apache-ant-${antversion}-bin.tar.gz -C /opt
sudo ln -sfn /opt/apache-ant-${antversion} /opt/ant
sudo sh -c 'echo ANT_HOME=/opt/ant >> /etc/environment'
sudo ln -sfn /opt/ant/bin/ant /usr/bin/ant

# check installation
ant -version

# cleanup
rm apache-ant-${antversion}-bin.tar.gz

и сохраняю в домашнем каталоге, затем:

[lamp@localhost ~]$ chnod +x installantoncentos.sh
[lamp@localhost ~]$ ./installantoncentos.sh

Проверяю результат:

[lamp@localhost ~]$ ant -version
Apache Ant(TM) version 1.9.9 compiled on February 2 2017

Git ставлю из стандартного репозитария и проверяю результат:

[lamp@localhost ~]$ sudo yum install git
[lamp@localhost ~]$ git --version
git version 1.7.1

Итак, нужные инструменты установлены и можно приступать к тестированию примеров для вебинара. Но это уже следующая история…
